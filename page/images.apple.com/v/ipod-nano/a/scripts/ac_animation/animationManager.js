(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());function extend(a,c){for(var b in c){if(c.hasOwnProperty(b)){a[b]=c[b]}}return a}var AC=window.AC||{};AC.Animation={initializeAnimations:function(a){extend(AC.Animation.Animations,a)},initializeScenes:function(b){for(var c=0,a=b.length;c<a;c++){AC.Animation.Scenes.push(new AC.Animation.Scene(b[c]))}if(AC.Animation.Debug){AC.Animation.Debug.initialize()}},getScene:function(b){for(var c=0,a=AC.Animation.Scenes.length;c<a;c++){if(AC.Animation.Scenes[c].name===b){return AC.Animation.Scenes[c]}}},isSupportedBrowser:function(){var a=function(){var b=(typeof document.body.style.webkitTransform==="string"||typeof document.body.style.MozTransform==="string"||typeof document.body.style.msTransform==="string"||typeof document.body.style.OTransform==="string"||typeof document.body.style.transform==="string");a=function(){return b};return b};if(!a()){return false}else{return true}},isIE9:function(){var c=navigator.userAgent.toLowerCase(),a=-1,b=c.match(/msie\D*([\.\d]*)/i),d;if(b&&b[1]){a=Number(b[1])}d=(a>=9);this.isIE9=function(){return d};return d}};AC.Animation.Animations={};AC.Animation.Scenes=[];AC.Animation.Scene=function(b){this.name=b.name;this.sprites=[];this.spritesLength=0;this.startTime=0;this.currentTime=0;this.totalDuration=0;for(var d=0,a=b.sprites.length;d<a;d++){var c=new AC.Animation.Sprite(b.sprites[d],this);this.sprites.push(c);this.totalDuration=(c.totalDuration()>this.totalDuration)?c.totalDuration():this.totalDuration}this.spritesLength=this.sprites.length};AC.Animation.Scene.prototype={play:function(){var b=this;var a=function(){b.currentTime=(new Date).getTime();if(b.currentTime>=b.startTime+b.totalDuration){b.stop();return}if(b.playing==true){for(var d=0,c=b.spritesLength;d<c;d++){b.sprites[d].step()}requestAnimationFrame(a)}};b.startTime=(new Date).getTime();b.playing=true;a()},gotoPercent:function(c){this.startTime=0;this.currentTime=this.totalDuration*(c/100);for(var b=0,a=this.spritesLength;b<a;b++){this.sprites[b].step()}},stop:function(){this.playing=false},elapsedTime:function(){return this.currentTime-this.startTime}};AC.Animation.Sprite=function(a,b){this.el=a.el;this.parentScene=b;this.animation=AC.Animation.Animations[a.animation];this.el=(typeof this.el==="object")?this.el:document.querySelector(this.el);return this};AC.Animation.Sprite.prototype={step:function(){var a=this.getCurrentKeyframe(),b=this.getKeyframeStartTime(a);this.pos=(this.parentScene.elapsedTime()-b)/this.currentKeyframe().duration;this.easedPosition=easingFunction[this.currentKeyframe().easingFunction](this.pos*this.totalDuration(),0,1,this.totalDuration());if(this.pos>1){return}this.parseStyleProperties()},parseStyleProperties:function(){var a=this.currentKeyframe().properties;for(var b in a){if(a.hasOwnProperty(b)){if(b!=="transform"){this.interpolateNonTransformStyles(b,a[b])}else{this.interpolateTransformStyles(a[b])}}}},interpolateNonTransformStyles:function(d,c){var a=this.getStylePropertyUnits(d);var e=this.currentKeyframe().properties[d],b=this.animation.keyframes[this.getCurrentKeyframe()+1].properties[d];this.el.style[d]=this.interpolateValue(e,b,this.easedPosition)+a},interpolateTransformStyles:function(d){var c="";for(var f in d){var b=this.getStylePropertyUnits(f),g=this.currentKeyframe().properties.transform[f],e=this.animation.keyframes[this.getCurrentKeyframe()+1].properties.transform[f],a=this.interpolateValue(g,e,this.easedPosition);switch(f){case"translate":if(AC.Animation.isIE9()){c+="translate("+a[0]+b+","+a[1]+b+") "}else{c+="translate3d("+a[0]+b+","+a[1]+b+","+a[2]+b+") "}break;case"rotate":if(AC.Animation.isIE9()){c+="rotate("+a[2]+b+") "}else{c+="rotateX("+a[0]+b+") rotateY("+a[1]+b+") rotateZ("+a[2]+b+") "}break;case"scale":if(AC.Animation.isIE9()){c+="scale("+a[0]+b+","+a[1]+b+") "}else{c+="scale3d("+a[0]+b+","+a[1]+b+","+a[2]+b+") "}break}}this.el.setVendorPrefixStyle("transform",c)},interpolateValue:function(e,d,b){var f;if(typeof e==="number"){f=e+((d-e)*b)}else{f=[];for(var c=0,a=e.length;c<a;c++){f.push(e[c]+((d[c]-e[c])*b))}}return f},getStylePropertyUnits:function(a){var b={opacity:"",rotate:"deg",skew:"deg",scale:"",perspective:""};if(a in b){return b[a]}else{return"px"}},currentKeyframe:function(){return this.animation.keyframes[this.getCurrentKeyframe()]},getCurrentKeyframe:function(){var c=0;for(var b=0,a=this.animation.keyframes.length;b<a;b++){if(this.parentScene.elapsedTime()<c+this.animation.keyframes[b].duration||this.parentScene.elapsedTime()>=this.totalDuration()){return b}c+=this.animation.keyframes[b].duration}},getKeyframeStartTime:function(b){var c=0;for(var a=0;a<b;a++){c+=this.animation.keyframes[a].duration}return c},totalDuration:function(){var c=0;for(var b=0,a=this.animation.keyframes.length;b<a;b++){if(this.animation.keyframes[b].duration){c+=this.animation.keyframes[b].duration}}this.totalDuration=function(){return c};return c}};
