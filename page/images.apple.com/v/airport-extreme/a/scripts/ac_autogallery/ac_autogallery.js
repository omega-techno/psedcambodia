var AC=window.AC||{};AC.AutoGallery={initialize:function ac_initialize(){this.setupGalleries()},setupGalleries:function ac_setupGalleries(){AC.Element.selectAll("."+this.classNames.autoInstantiation).forEach(function(a){this.__setUpGallery(a)},this)},classNames:{autoInstantiation:"autogallery",wrapper:"gallery",view:"gallery-view",content:"gallery-content"},__specialSwapViewTriggers:["next","previous","SwapViewFirstSection","SwapViewPreviousSelection"],galleries:{},slideshows:{},_classPrefix:"autogallery-",setClassPrefix:function ac_setClassPrefix(a){if(typeof a==="string"){this._classPrefix=a}return this._classPrefix},__setUpGallery:function ac___setUpGallery(f){var d;var e;var a=AC.Element.select("."+this.classNames.view,f);if(this.galleries.hasOwnProperty(a.id)){return}var c=this.Types.Registries.gallery.match(f);var b=c.properties();if(this.__galleryViewIsValid(a)){d=AC.Element.selectAll("."+this.classNames.content,f);d=d.concat(AC.Element.selectAll("a."+a.id,f));d=this.__parseContent(d,f);if(d.length<2){AC.log("Gallery “"+a.id+"” not instantiated because there were fewer than 2 content sections defined.");return}e=c.context("viewer")||AC.ViewMaster.Viewer;this.galleries[a.id]=new e(d,a.id,a.id,b);this.__addGetterToInstance(this.galleries[a.id],"autoGalleryType",c);this.__addGetterToInstance(this.galleries[a.id],"autoGalleryWrapper",f);this.__setUpDelegate(a,c.context("delegate"));this.__setUpOnInit(this.galleries[a.id]);this.__setUpSlideshow(a,f)}},__galleryViewIsValid:function ac___galleryViewIsValid(a){if(!Object.isElement(a)){throw"View element not found for gallery."}if(typeof a.id!=="string"||a.id===""){throw"Valid ID not found on view for gallery."}if(typeof this.galleries[a.id]!=="undefined"){throw'View ID "'+a.id+'" is not unique.'}return true},__setUpDelegate:function ac___setUpDelegate(a,b){if(b){this.galleries[a.id].setDelegate(b)}},__setUpOnInit:function ac___setUpOnInit(a){var b=a.autoGalleryType();var c=b.context("onInit");if(typeof c==="function"){c(a)}},__setUpSlideshow:function ac___setUpSlideshow(a,c){var b;if(c.className.match("(^|\\s)"+this._classPrefix+"slideshow(-|\\s|$)")){b=this.Types.Registries.slideshow.match(c);this.slideshows[a.id]=new AC.ViewMaster.Slideshow(this.galleries[a.id],this._classPrefix+"slideshow-trigger",b.properties());this.__addGetterToInstance(this.slideshows[a.id],"autoGalleryType",b);this.__addGetterToInstance(this.slideshows[a.id],"autoGalleryWrapper",c);this.__setUpOnInit(this.slideshows[a.id])}},__addGetterToInstance:function ac___addGetterToInstance(a,b,c){a[b]=function(){return c}},addType:function ac_addType(c,b,f,a,d){var e=this.Types.Registries.gallery.addComponent(c,b,f,a,d);e.getOptions=function(){try{AC.log("AC.AutoGallery: getOptions() on Type is deprecated. Use properties() instead.")}catch(g){}return this.properties()};return e},addSlideshowType:function ac_addSlideshowType(c,b,f,a,d){var e=this.Types.Registries.slideshow.addComponent(c,b,f,a,d);e.getOptions=function(){try{AC.log("AC.AutoGallery: getOptions() on Type is deprecated. Use properties() instead.")}catch(g){}return this.properties()};return e},lookupType:function ac_lookupType(b,a){var c;if(typeof b!=="string"){throw"Type name required to get options for Type."}a=a||"gallery";if(typeof AC.AutoGallery.Types.Registries[a]==="undefined"){throw"AC.AutoGallery Registry ‘"+a+"’ does not exist."}c=AC.AutoGallery.Types.Registries[a].lookup(b);return c},options:function ac_options(b,a){var c=this.lookupType(b,a);if(c){return c.properties()}throw"Type ‘"+b+"’ not found in ‘"+a+"’ Type Registry."},slideshowOptions:function ac_slideshowOptions(a){return this.options(a,"slideshow")},__getWrapperForContent:function ac___getWrapperForContent(a){var c;var b=a.parentNode;while(typeof c==="undefined"){if(AC.Element.hasClassName(b,this.classNames.autoInstantiation)||AC.Element.hasClassName(b,this.classNames.wrapper)){c=b}b=b.parentNode;if(b===document.body){c=null}}return c},__parseContent:function ac___parseContent(d,f){var e;var a;var b=[];var c=[];for(a=0;a<d.length;a++){if(this.__getWrapperForContent(d[a])===f){if(AC.Element.hasClassName(d[a],this.classNames.content)){e=d[a].getAttribute("id")}else{e=d[a].getAttribute("href");if(!!e.match("#")){e=e.split("#")[1]}else{throw"ID for trigger was not found in HREF."}}if(typeof e==="string"&&e!==""){if(!this.__specialSwapViewTriggers.include(e)){if(!c.include(e)){c.push(e);b.push(d[a])}}}else{throw"ID for section was not valid."}}}return b},logTypes:function ac_logTypes(){var c=0;var a;var b;try{AC.log("----------------------------------");AC.log("	Gallery Types");AC.log("----------------------------------");for(a in this.galleries){if(this.galleries.hasOwnProperty(a)){c++;AC.log(c+". "+a+": "+this.galleries[a].autoGalleryType().name())}}if(c===0){AC.log("(none)")}AC.log("");c=0;AC.log("----------------------------------");AC.log("	Slideshow Types");AC.log("----------------------------------");for(b in this.slideshows){if(this.slideshows.hasOwnProperty(b)){c++;AC.log(c+". "+b+": "+this.slideshows[b].autoGalleryType().name())}}if(c===0){AC.log("(none)")}AC.log("")}catch(d){}}};AC.Object.synthesize(AC.AutoGallery);AC.namespace("AC.AutoGallery.Types");AC.namespace("AC.AutoGallery.Types.Registries");AC.AutoGallery.Types.Registries.gallery=new AC.Registry(AC.AutoGallery.classPrefix(),{contextInherits:["viewer","delegate"],matchCatchAll:true});AC.AutoGallery.Types.Registries.slideshow=new AC.Registry(AC.AutoGallery.classPrefix()+"slideshow-",{matchCatchAll:true});AC.AutoGallery.Types.Registries.gallery.addType=function(a,c,d,e,b){AC.log("AC.AutoGallery.Types.Registries.gallery.addType() is deprecated. Use AC.AutoGallery.addType() instead.");AC.AutoGallery.addType(a,c,d,e,b)};AC.AutoGallery.Types.Registries.slideshow.addType=function(a,c,d,e,b){AC.log("AC.AutoGallery.Types.Registries.slideshow.addType() is deprecated. Use AC.AutoGallery.addSlideshowType() instead.");AC.AutoGallery.addSlideshowType(a,c,d,e,b)};AC.AutoGallery.EventResponder=AC.Class({initialize:function ac_initialize(){this._className=AC.AutoGallery.classNames.content;AC.Object.synthesize(this);this.__boundWillShow=this.__willShow.bindAsEventListener(this);this.__boundDidShow=this.__didShow.bindAsEventListener(this);if(typeof Event.Listener!=="undefined"){Event.Listener.listenForEvent(AC.ViewMaster,"ViewMasterWillShowNotification",true,this.__boundWillShow);Event.Listener.listenForEvent(AC.ViewMaster,"ViewMasterDidShowNotification",true,this.__boundDidShow)}else{throw"EventMixins required for AC.AutoGallery"}},__isAutoGallery:function ac___isAutoGallery(a){var b=a.view.view().id;return(typeof AC.AutoGallery.galleries[b]!=="undefined")&&(AC.AutoGallery.galleries[b]===a)},__willShow:function ac___willShow(a){var b=a.event_data.data.sender;var d=a.event_data.data.incomingView;var c=a.event_data.data.outgoingView;if(!this.__isAutoGallery(b)){return}},__didShow:function ac___didShow(a){var b=a.event_data.data.sender;var d=a.event_data.data.incomingView;var c=a.event_data.data.outgoingView;if(!this.__isAutoGallery(b)){return}}});AC.AutoGallery.addType("_base",{manageZ:true,addGalleryContentClassName:true,heightFromFirstSection:true,silentTriggers:true,imageLinkAutoCaptions:true,addSectionIdAsClassName:true,useHTML5Tags:true});AC.AutoGallery.addType("image",{useKeyboardNav:true,discontinuousPreviousNext:true});AC.AutoGallery.addType("image-fadein",{shouldAnimateFadeIn:true},AC.Function.emptyFunction,"image");AC.AutoGallery.addType("slide",{useKeyboardNav:true,discontinuousPreviousNext:true,useTouchEvents:true},function(c,e){var b;var d;var a=AC.Element.select("."+AC.AutoGallery.classNames.view,c);if(Object.isElement(a)){b=a.offsetWidth;d=c.offsetWidth;if(b>=(d*2)){return true}}return false},"_base",{viewer:AC.ViewMaster.SlideViewer});AC.AutoGallery.addType("video",{manageZ:1010,showFirstOnStopMovie:true,ensureInView:true,escapeToClose:true},function(c,d){var e;var b;var a=AC.Element.select("."+AC.AutoGallery.classNames.view,c);if(Object.isElement(a)){e=a.getAttribute("id");if(typeof e==="string"&&AC.Element.select("a."+e,a)){return true}}return false});AC.AutoGallery.addSlideshowType("_base",{autoplay:true,stopOnUserInteraction:true});AC.AutoGallery.addSlideshowType("standard",{discontinuousPreviousNext:false,stopAfterReturnToSection:false});AC.AutoGallery.addSlideshowType("hero",{autoplay:2000,delay:7000,stopAfterReturnToSection:0,discontinuousPreviousNext:false});AC.AutoGallery.addSlideshowType("showonscroll",{},AC.Function.emptyFunction,"standard",{onInit:function ac_onInit(a){var c=a.autoGalleryType();var b=a.contentController.view.view();var d=c.context("setupShowOnScroll")(a,b)},setupShowOnScroll:function ac_setupShowOnScroll(b,d){if(typeof AC.ShowOnScroll==="undefined"){throw"AC.ShowOnScroll must be included on this page for showonscroll type slideshows."}var c=b.autoGalleryType().properties();var f=new AC.ShowOnScroll(d,c);var e={scrolledIntoViewPastThreshold:function a(h){b.start()},scrolledOutOfViewPastThreshold:function g(h){b.stop()}};f.setDelegate(e);b.showOnScroll=function(){return f};window.setTimeout(function(){e.scrolledOutOfViewPastThreshold(d)},10)}});AC.AutoGallery.addSlideshowType("showonscroll-wrapper",{},AC.Function.emptyFunction,"showonscroll",{onInit:function ac_onInit(a){var c=a.autoGalleryType();var b=a.autoGalleryWrapper();var d=c.context("setupShowOnScroll")(a,b)}});Event.onDOMReady(function(){if(typeof AC.ViewMaster.Tracker==="function"){if(typeof window.tracker==="undefined"){window.tracker=new AC.ViewMaster.Tracker("click")}}else{throw"/global/scripts/view_master_tracker.js needs to be included on this page."}AC.AutoGallery.initialize()});AC.AutoGallery.version="1.1";
